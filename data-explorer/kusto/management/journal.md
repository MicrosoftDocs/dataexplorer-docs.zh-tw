---
title: 紀錄管理 - Azure 資料資源管理員 |微軟文件
description: 本文介紹 Azure 數據資源管理器中的日誌管理。
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 08/19/2019
ms.openlocfilehash: bbe5ab4bda42fdfd9382c7e71da85789c13f6987
ms.sourcegitcommit: 47a002b7032a05ef67c4e5e12de7720062645e9e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/15/2020
ms.locfileid: "81520786"
---
# <a name="journal-management"></a>日記帳管理

 `Journal`包含有關在 Kusto 資料庫上執行的元數據操作的資訊。

元數據操作可能是由使用者執行的控制命令或系統執行的內部控制命令(如按保留丟棄範圍)執行的控制命令的結果。

**注意：**

- 包含*新增新*延伸的碟區(`.ingest``.append`如`.move`等)的中繼資料操作將沒有顯示`Journal`在中的匹配事件。
- 結果集列中的數據以及顯示結果集的格式*不是*合同的,因此*不*建議依賴它們。

|事件        |EventTimestamp     |資料庫  |EntityName|更新實體名稱|實體版本|實體容器名稱|
|-------------|-------------------|----------|----------|-----------------|-------------|-------------------|
|建立表 |2017-01-05 14:25:07|內部資料庫|我的表1  |我的表1         |v7.0         |內部資料庫         |
|重新命名表 |2017-01-13 10:30:01|內部資料庫|我的表1  |我的表2         |v8.0         |內部資料庫         |  

|原始實體狀態|更新實體狀態                                              |變更命令                                                                                                          |主體            |
|-------------------|----------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------|---------------------|
|.                  |名稱:MyTable1,屬性:名稱[我的表1]。[col1],類型[I32'|.建立表 MyTable1 (col1:int)                                                                                      |imike@fabrikam.com
|.                  |db 屬性 (太長,無法在此處顯示)               |.建立資料庫測試DB保留https://imfbkm.blob.core.windows.net/md(*"https://imfbkm.blob.core.windows.net/data, *" " )|AAD 應用程式 id_76263cdb-abcd-545644e9c404
|名稱:MyTable1,屬性:名稱[我的表1]。[col1],類型[I32'|名稱:MyTable2,屬性:名稱[我的表1]。[col1],類型[I32'|.將表 MyTable1 重新命名為 MyTable2|rdmik@fabrikam.com


事件 - 中繼資料名稱。

事件時間戳 - 事件時間戳。

資料庫 - 此資料庫的中繼資料在事件發生後被更改。

實體名稱 - 實體名稱,操作在更改之前執行。

更新的實體名稱 - 更改後的新實體名稱。

實體版本 - 更改後的新元數據版本(db/群集)。

實體容器名稱 - 實體容器名稱(即:實體\列、容器\表)。

原始實體狀態 - 更改前實體的狀態(實體屬性)。

更新實體狀態 - 更改後的新狀態。

變更命令 - 觸發中資料更改的已執行控制命令。

主體 - 執行控制命令的主體(用戶/應用)。
                    
## <a name="show-journal"></a>.顯示紀錄

該`.show journal`命令返回元數據更改的清單,該列表位於使用者具有管理員訪問許可權的資料庫/群集上。

**權限**

每個人都可以執行命令(群集訪問)。 

傳回的結果將包括: 
1. 執行命令的使用者的所有日記帳分錄。 
2. 執行命令的使用者有權訪問所有資料庫的日記帳分錄。 
3. 如果執行該命令的使用者是群集管理員,則所有群集日記帳分錄。 

## <a name="show-database-databasename-journal"></a>.顯示*資料庫名稱*紀錄 

資料庫`journal`名稱 指令傳回特定資料庫元資料更改的日誌。 *DatabaseName* `.show` `database`

**權限**

每個人都可以執行命令(群集訪問)。 傳回的結果將包括: 
1. 如果執行該命令的用戶是*資料庫名稱*中的資料庫管理員,則資料庫*資料庫名稱*的所有日誌條目。 
2. 否則,*資料庫名稱*和執行命令的使用者的所有日記條目。 

